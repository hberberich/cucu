Feature: PredictPrice

#See also: https://confluence.as24.local/display/TechnologyChange/PE+Parameters

  Scenario Outline: Predicted prices from Data scientists match displayed prices with light model
    Given User opens price estimation tool on "<url>"
    When Test data light "<natcode>" "<predict>" "<articleid>" "<makemodelid>" "<makemodel>" "<created>" "<pricepubliceuro>" "<bodytypeid>" "<fuelid>" "<gearingid>" "<mileage>" "<power>" "<customer>" "<seasonmonth>" "<fregyear>" "<testdate>"
    Examples:
      | url                                            | natcode  | predict          | articleid | makemodelid | makemodel   | created             | pricepubliceuro | bodytypeid | fuelid | gearingid | mileage | power | customer | seasonmonth | fregyear | testdate            |
      | https://<env>.autoscout24.de/fahrzeugbewertung | 10110098 | 16601.7177148438 | 273501877 | 9_15637     | Audi_S3     | 2015-06-27 14:44:24 | 15000           | 6          | B      | M         | 84300   | 195   | Private  | June        | 2008     | 2015-06-27 14:44:24 |
      #| https://<env>.autoscout24.de/fahrzeugbewertung | 10111381 | 17807.5714941406 | 272048587 | 9_15637     | Audi_S3     | 2015-05-31 16:17:29 | 19900           | 5          | B      | M         | 125000  | 195   | Private  | May         | 2009     | 2015-05-31 16:17:29 |
      #| https://<env>.autoscout24.be/evaluationvoiture | 80496    | 5258.79682128906 | 271007526 | 55_15401    | Peugeot_206 | 2015-05-10 13:04:24 | 5350            | 6          | B      | M         | 34800   | 44    | Private  | May         | 2011     | 2015-05-10 13:04:24 |

      #grep "Peugeot_206" * | grep "Private" | grep "May"
      #| https://<env>.autoscout24.de/fahrzeugbewertung| 26177.418671875  | 270290270 | 9_15637     | Audi_S3     | 2015-04-27 13:50:11 | 24900           | 5          | B      | A         | 42100   | 195   |Private    | April       | 2011     | 2015-04-27 13:50:11 |
      #| https://<env>.autoscout24.de/fahrzeugbewertung| 1778.68953552246 | 287418856 | 55_15401    | Peugeot_206 | 2016-04-05 21:01:07 | 2000            | 6          | B      | M        | 180000  | 55    | Private   | April       | 2007     | 2016-04-05 21:01:07 |
      #| https://<env>.autoscout24.de/fahrzeugbewertung
      ###| https://<env>.autoscout24.de/fahrzeugbewertung| 8491.23533691406 | 273283017 |  9_15637    | Audi_S3   | 2015-06-23 23:44:18 | 7499            | 6          | B      | M         | 170000  | 165   | Private   | June        | 2002     | 2015-06-23 23:44:18 |

  Scenario Outline: Predicted prices from Data scientists match displayed prices with full model
    Given Test data full model "<predict>" "<article_id>" "<makemodel_id>" "<makemodel>" "<created>" "<price_public_euro>" "<body_type_id>" "<emission_class_id>" "<fuel_id>" "<gearing_id>" "<body_color_id>" "<mileage>" "<doors>" "<power>" "<customer>" "<equipment_id_1>" "<equipment_id_2>" "<equipment_id_3>" "<equipment_id_4>" "<equipment_id_5>" "<equipment_id_6>" "<equipment_id_9>" "<equipment_id_10>" "<equipment_id_12>" "<equipment_id_13>" "<equipment_id_15>" "<equipment_id_16>" "<equipment_id_17>" "<equipment_id_18>" "<equipment_id_19>" "<equipment_id_20>" "<equipment_id_21>" "<equipment_id_23>" "<equipment_id_26>" "<equipment_id_27>" "<equipment_id_29>" "<equipment_id_30>" "<equipment_id_31>" "<equipment_id_32>" "<equipment_id_33>" "<equipment_id_34>" "<equipment_id_37>" "<equipment_id_38>" "<equipment_id_39>" "<equipment_id_40>" "<equipment_id_41>" "<equipment_id_42>" "<equipment_id_43>" "<equipment_id_45>" "<equipment_id_46>" "<equipment_id_47>" "<equipment_id_49>" "<equipment_id_50>" "<equipment_id_51>" "<equipment_id_52>" "<equipment_id_53>" "<equipment_id_54>" "<equipment_id_110>" "<equipment_id_112>" "<equipment_id_113>" "<equipment_id_114>" "<equipment_id_115>" "<equipment_id_116>" "<equipment_id_117>" "<equipment_id_118>" "<equipment_id_119>" "<equipment_id_120>" "<equipment_id_121>" "<equipment_id_122>" "<equipment_id_123>" "<equipment_id_124>" "<equipment_id_125>" "<equipment_id_126>" "<equipment_id_127>" "<equipment_id_128>" "<equipment_id_129>" "<equipment_id_130>" "<equipment_id_131>" "<equipment_id_132>" "<consumption>" "<season_month>" "<freg_year>" "<testdate>"
    Examples:
      | predict          | article_id | makemodel_id | makemodel   | created             | price_public_euro | body_type_id | emission_class_id | fuel_id | gearing_id | body_color_id | mileage | doors | power | customer | equipment_id_1 | equipment_id_2 | equipment_id_3 | equipment_id_4 | equipment_id_5 | equipment_id_6 | equipment_id_9 | equipment_id_10 | equipment_id_12 | equipment_id_13 | equipment_id_15 | equipment_id_16 | equipment_id_17 | equipment_id_18 | equipment_id_19 | equipment_id_20 | equipment_id_21 | equipment_id_23 | equipment_id_26 | equipment_id_27 | equipment_id_29 | equipment_id_30 | equipment_id_31 | equipment_id_32 | equipment_id_33 | equipment_id_34 | equipment_id_37 | equipment_id_38 | equipment_id_39 | equipment_id_40 | equipment_id_41 | equipment_id_42 | equipment_id_43 | equipment_id_45 | equipment_id_46 | equipment_id_47 | equipment_id_49 | equipment_id_50 | equipment_id_51 | equipment_id_52 | equipment_id_53 | equipment_id_54 | equipment_id_110 | equipment_id_112 | equipment_id_113 | equipment_id_114 | equipment_id_115 | equipment_id_116 | equipment_id_117 | equipment_id_118 | equipment_id_119 | equipment_id_120 | equipment_id_121 | equipment_id_122 | equipment_id_123 | equipment_id_124 | equipment_id_125 | equipment_id_126 | equipment_id_127 | equipment_id_128 | equipment_id_129 | equipment_id_130 | equipment_id_131 | equipment_id_132 | consumption | season_month | freg_year | testdate            |
      | 11147.8558398438 | 290740965  | 55_20057     | Peugeot_208 | 2016-06-08 20:28:09 | 11000             | 6            | 5                 | B       | M          | 6             | 25000   | 5     | 60    | Private  | 1              | 1              | 1              | 0              | 1              | 0              | 0              | 1               | 1               | 1               | 1               | 0               | 1               | 0               | 0               | 0               | 1               | 1               | 0               | 0               | 0               | 0               | 0               | 1               | 1               | 0               | 1               | 1               | 0               | 0               | 1               | 1               | 1               | 0               | 0               | 1               | 1               | 0               | 0               | 0               | 0               | 0               | 0                | 0                | 0                | 1                | 1                | 0                | 0                | 0                | 0                | 0                | 1                | 1                | 0                | 1                | 1                | 0                | 0                | 0                | 1                | 0                | 0                | 0                | 4.5         | June         | 2015      | 2016-06-08 20:28:09 |
      #    ==> BE_mixed_full_201606100325/m_55_20057.csv <==
      #     Given Test data full model "<predict>" "<article_id>" "<makemodel_id>" "<makemodel>" "<created>" "<price_public_euro>" "<body_type_id>" "<emission_class_id>" "<fuel_id>" "<gearing_id>" "<body_color_id>" "<mileage>" "<doors>" "<power>" "<customer>" "<equipment_id_1>" "<equipment_id_2>" "<equipment_id_3>" "<equipment_id_4>" "<equipment_id_5>" "<equipment_id_6>" "<equipment_id_9>" "<equipment_id_10>" "<equipment_id_11>" "<equipment_id_12>" "<equipment_id_13>" "<equipment_id_15>" "<equipment_id_16>" "<equipment_id_17>" "<equipment_id_18>" "<equipment_id_19>" "<equipment_id_20>" "<equipment_id_21>" "<equipment_id_23>" "<equipment_id_26>" "<equipment_id_27>" "<equipment_id_29>" "<equipment_id_30>" "<equipment_id_31>" "<equipment_id_32>" "<equipment_id_34>" "<equipment_id_36>" "<equipment_id_37>" "<equipment_id_38>" "<equipment_id_39>" "<equipment_id_40>" "<equipment_id_41>" "<equipment_id_42>" "<equipment_id_43>" "<equipment_id_44>" "<equipment_id_45>" "<equipment_id_46>" "<equipment_id_47>" "<equipment_id_49>" "<equipment_id_50>" "<equipment_id_52>" "<equipment_id_53>" "<equipment_id_54>" "<equipment_id_110>" "<equipment_id_111>" "<equipment_id_112>" "<equipment_id_113>" "<equipment_id_114>" "<equipment_id_115>" "<equipment_id_116>" "<equipment_id_117>" "<equipment_id_118>" "<equipment_id_119>" "<equipment_id_120>" "<equipment_id_121>" "<equipment_id_122>" "<equipment_id_123>" "<equipment_id_124>" "<equipment_id_125>" "<equipment_id_126>" "<equipment_id_127>" "<equipment_id_128>" "<equipment_id_129>" "<equipment_id_130>" "<equipment_id_131>" "<equipment_id_132>" "<consumption>" "<season_month>" "<freg_year>" "<testdate>"
      #| predict          | article_id | makemodel_id | makemodel   | created             | price_public_euro | body_type_id | emission_class_id | fuel_id | gearing_id | body_color_id | mileage | doors | power | customer | equipment_id_1 | equipment_id_2 | equipment_id_3 | equipment_id_4 | equipment_id_5 | equipment_id_6 | equipment_id_9 | equipment_id_10 | equipment_id_11 | equipment_id_12 | equipment_id_13 | equipment_id_15 | equipment_id_16 | equipment_id_17 | equipment_id_18 | equipment_id_19 | equipment_id_20 | equipment_id_21 | equipment_id_23 | equipment_id_26 | equipment_id_27 | equipment_id_29 | equipment_id_30 | equipment_id_31 | equipment_id_32 | equipment_id_34 | equipment_id_36 | equipment_id_37 | equipment_id_38 | equipment_id_39 | equipment_id_40 | equipment_id_41 | equipment_id_42 | equipment_id_43 | equipment_id_44 | equipment_id_45 | equipment_id_46 | equipment_id_47 | equipment_id_49 | equipment_id_50 | equipment_id_52 | equipment_id_53 | equipment_id_54 | equipment_id_110 | equipment_id_111 | equipment_id_112 | equipment_id_113 | equipment_id_114 | equipment_id_115 | equipment_id_116 | equipment_id_117 | equipment_id_118 | equipment_id_119 | equipment_id_120 | equipment_id_121 | equipment_id_122 | equipment_id_123 | equipment_id_124 | equipment_id_125 | equipment_id_126 | equipment_id_127 | equipment_id_128 | equipment_id_129 | equipment_id_130 | equipment_id_131 | equipment_id_132 | consumption | season_month | freg_year | testdate            |
      #| 4014.8474420166  | 269489853  | 55_15401     | Peugeot_206 | 2015-04-13 16:20:26 | 4400              | 6            | 4                 | D       | M          | 11            | 57400   | 5     | 50    | Private  | 1              | 1              | 1              | 0              | 0              | 0              | 0              | 1               | 0               | 0               | 1               | 0               | 0               | 0               | 0               | 1               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0               | 0              | 0               | 0               | 0               | 1                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 4.3         | April        | 2008      | 2015-04-13 16:20:26 |
      #| 11696.7421679688 | 287215356  | 54_20191     | Opel_Adam   | 2016-04-01 16:15:56 | 11800             | 6            | 6                 | B       | M          | 5             | 40000   | 3     | 74    | Private  | 1              | 1              | 1              | 0              | 0              | 0              | 0              | 0               | 0               | 1               | 1               | 1               | 1               | 1               | 0               | 0               | 0               | 0               | 1               | 0               | 1               | 0               | 0               | 1               | 1               | 1               | 0               | 1               | 0               | 0               | 1               | 0               | 0               | 1               | 1               | 1               | 0               | 0               | 0               | 0               | 1               | 0               | 0               | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 0                | 1                | 1                | 0                | 0                | 0                | 0                | 0                | 1                | 1                | 0                | 1                | 1                | 0                | 0                | 0                | 0               | 0               | 0               | 0               | 5.4 | April | 2014 | 2016-04-01 16:15:56


  Scenario Outline: Predicted prices from Data scientists match displayed prices with API light model
    Given User opens price estimation tool on "<url>"
    When Test data API light "<natcode>" "<predict>" "<articleid>" "<makemodelid>" "<makemodel>" "<created>" "<pricepubliceuro>" "<bodytypeid>" "<fuelid>" "<gearingid>" "<mileage>" "<power>" "<customer>" "<seasonmonth>" "<fregyear>" "<testdate>"
    Examples:
      | url                          | natcode  | predict          | articleid | makemodelid | makemodel   | created             | pricepubliceuro | bodytypeid | fuelid | gearingid | mileage | power | customer  | seasonmonth | fregyear | testdate            |
      #| https://<env>.autoscout24.de | 10111381 | 17807.5714941406 | 272048587 | 9_15637     | Audi_S3     | 2015-05-31 16:17:29 | 19900           | 5          | B      | M         | 125000  | 195   | Private   | May         | 2009     | 2015-05-31 16:17:29 |
      #| https://<env>.autoscout24.be | 80496    | 5258.79682128906 | 271007526 | 55_15401    | Peugeot_206 | 2015-05-10 13:04:24 | 5350            | 6          | B      | M         | 34800   | 44    | Private   | May         | 2011     | 2015-05-10 13:04:24 |
      #| https://<env>.autoscout24.be | 80496    | 4628.76377685547 | 270737307 | 55_15401    | Peugeot_206 | 2015-05-05 20:17:04 | 3500            | 6          | B      | M         | 63000   | 44    | Private   | May         | 2011     | 2015-05-05 20:17:04 |

      #| 26177.418671875  | 270290270 | 9_15637     | Audi_S3     | 2015-04-27 13:50:11 | 24900           | 5          | B      | A         | 42100   | 195   | Private   | April       | 2011     | 2015-04-27 13:50:11 |
      #| 1778.68953552246 | 287418856 | 55_15401    | Peugeot_206 | 2016-04-05 21:01:07 | 2000            | 6          | B      | M         | 180000  | 55    | Private   | April       | 2007     | 2016-04-05 21:01:07 |
